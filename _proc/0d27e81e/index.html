<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="nbdev">

<title>nbdev_tutorial - nbdev Tutorial</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="nbdev_tutorial - nbdev Tutorial">
<meta property="og:description" content="nbdev">
<meta property="og:site-name" content="nbdev_tutorial">
<meta name="twitter:title" content="nbdev_tutorial - nbdev Tutorial">
<meta name="twitter:description" content="nbdev">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">nbdev_tutorial</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">nbdev Tutorial</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link active">nbdev Tutorial</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./card.html" class="sidebar-item-text sidebar-link">Card–An example</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./desk.html" class="sidebar-item-text sidebar-link">Deck–An example</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./test.html" class="sidebar-item-text sidebar-link">Test</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#why-nbdev" id="toc-why-nbdev" class="nav-link active" data-scroll-target="#why-nbdev">Why nbdev?</a></li>
  <li><a href="#how-to-use-nbdev" id="toc-how-to-use-nbdev" class="nav-link" data-scroll-target="#how-to-use-nbdev">How To Use nbdev</a>
  <ul class="collapse">
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">1. Installation</a></li>
  <li><a href="#tạo-github-repository-trống-và-clone-về-local" id="toc-tạo-github-repository-trống-và-clone-về-local" class="nav-link" data-scroll-target="#tạo-github-repository-trống-và-clone-về-local">2. Tạo github repository trống và clone về local</a></li>
  <li><a href="#khởi-tạo-nbdev-trên-repository" id="toc-khởi-tạo-nbdev-trên-repository" class="nav-link" data-scroll-target="#khởi-tạo-nbdev-trên-repository">3. Khởi tạo nbdev trên repository</a></li>
  <li><a href="#push-repository-đã-được-khởi-tạo-nbdev-lên-github" id="toc-push-repository-đã-được-khởi-tạo-nbdev-lên-github" class="nav-link" data-scroll-target="#push-repository-đã-được-khởi-tạo-nbdev-lên-github">4. Push repository đã được khởi tạo nbdev lên GitHub</a></li>
  <li><a href="#kích-hoạt-github-pages" id="toc-kích-hoạt-github-pages" class="nav-link" data-scroll-target="#kích-hoạt-github-pages">5. Kích hoạt GitHub Pages</a></li>
  <li><a href="#các-bước-cơ-bản-để-build-một-nbdev-repository" id="toc-các-bước-cơ-bản-để-build-một-nbdev-repository" class="nav-link" data-scroll-target="#các-bước-cơ-bản-để-build-một-nbdev-repository">6. Các bước cơ bản để build một nbdev repository</a></li>
  </ul></li>
  <li><a href="#directives" id="toc-directives" class="nav-link" data-scroll-target="#directives">Directives</a>
  <ul class="collapse">
  <li><a href="#cell-visibility" id="toc-cell-visibility" class="nav-link" data-scroll-target="#cell-visibility">1. Cell Visibility</a></li>
  <li><a href="#generating-source-code" id="toc-generating-source-code" class="nav-link" data-scroll-target="#generating-source-code">2. Generating Source Code</a></li>
  <li><a href="#cell-execution" id="toc-cell-execution" class="nav-link" data-scroll-target="#cell-execution">3. Cell Execution</a></li>
  </ul></li>
  <li><a href="#command" id="toc-command" class="nav-link" data-scroll-target="#command">Command</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/hoangtrung020541/nbdev_tutorial/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">nbdev Tutorial</h1>
</div>

<div>
  <div class="description">
    nbdev
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<p>Một vài hướng dẫn cơ bản cách sử dụng <code>nbdev</code> cho AI Engineer, để biết thêm chi tiết về cách sử dụng hãy truy cập <a href="https://nbdev.fast.ai/">nbdev official tutorial</a> hoặc YouTube video <a href="https://www.youtube.com/watch?v=l7zS8Ld4_iA">nbdev tutorial – zero to published project in 90 minutes</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="https://www.youtube.com/watch?v=l7zS8Ld4_iA"><img src="https://i.ytimg.com/vi/l7zS8Ld4_iA/sddefault.jpg" class="img-fluid figure-img"></a></p>
</figure>
</div>
<section id="why-nbdev" class="level2">
<h2 class="anchored" data-anchor-id="why-nbdev">Why nbdev?</h2>
<p>Là một AI engineer, bạn chủ yếu làm việc với các file <code>.ipynb</code> . Tuy nhiên, trong quá trình triển khai production, các file <code>.py</code> là bắt buộc để các model AI có thể hoạt động với Web backend. Tuy nhiên, hầu hết những người mới bắt đầu đều thiếu software skill và khó khăn trong việc code các file Python. Đó là lý do tại sao <a href="https://nbdev.fast.ai">nbdev</a> ra đời và đến giải cứu bạn.</p>
<p>Nbdev là một battery-ready notebook development platform, được xây dựng trên <a href="https://quarto.org">Quarto</a> platform. Nó cho phép: - Đồng bộ giữa file <code>.ipynb</code> và file <code>.py</code> - Tạo nhanh document sử dụng <a href="https://www.markdownguide.org">markdown</a> (*) trong khi develop - Publish package của bạn trên PyPI hoặc Conda - <a href="https://www.youtube.com/watch?v=8aV5AxJrHDg&amp;list=PLZMWkkQEwOPmGolqJPsAm_4fcBDDc2to_">Continuous Integration</a> với git và chạy trên git page - Test, code, document ở một nơi</p>
<p>(*) Markdown thường được sử dụng trong github repo với tên <code>readme.md</code>, để tìm hiểu thêm về Markdown hãy truy cập <a href="https://www.markdownguide.org/">Markdown Guide</a>.</p>
<p><img src="https://github.blog/wp-content/uploads/2020/11/nbdev_logo11.png?fit=1200%2C630" class="img-fluid"></p>
</section>
<section id="how-to-use-nbdev" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use-nbdev">How To Use nbdev</h2>
<section id="installation" class="level3">
<h3 class="anchored" data-anchor-id="installation">1. Installation</h3>
<ul>
<li>Python</li>
<li>Trình quản lý Python package: Khuyến khích sử dụng <code>conda</code> hoặc <code>pip</code></li>
<li>Jupyter Notebook: <code>pip install notebook</code> hoặc <code>conda install notebook</code></li>
<li>nbdev: <code>pip install nbdev</code> hoặc <code>conda install -c fastai nbdev</code></li>
<li>Quarto: <code>nbdev_install_quarto</code></li>
</ul>
</section>
<section id="tạo-github-repository-trống-và-clone-về-local" class="level3">
<h3 class="anchored" data-anchor-id="tạo-github-repository-trống-và-clone-về-local">2. Tạo github repository trống và clone về local</h3>
<ul>
<li>Bạn có thể tạo nhanh một github repo thông qua link này: <a href="https://github.com/new">github.com/new</a>.</li>
<li>Nhớ thêm description cho repo, bởi vì nbdev sẻ sử dụng nó. Không tạo tạo các file <code>README.md</code>, <code>.gitignore</code>, hoặc <code>license</code>.</li>
<li>Clone code về local và di chuyển đến repo đó bằng command <code>cd name_repo</code> trên terminal.</li>
</ul>
</section>
<section id="khởi-tạo-nbdev-trên-repository" class="level3">
<h3 class="anchored" data-anchor-id="khởi-tạo-nbdev-trên-repository">3. Khởi tạo nbdev trên repository</h3>
<ul>
<li>Để khởi tạo nbdev trên repository, bạn hãy sử dụng command <code>nbdev_new</code> trên terminal</li>
<li>Sau khi khởi tạo nbdev, một số file và folder được tạo ra:<br>
<code>.github</code> Chứa workflow cho CI.<br>
<code>_proc</code><br>
<code>nbs</code> Là viết tắt của “notebook source”, đây là nơi làm việc của các file notebook <code>.ipynb</code><br>
<code>test_nbdev</code> Sau khi xử lý các tệp notebook, các tệp <code>.py</code> sẽ được export vô lib này (tên folder này dựa trên tên repository)<br>
<code>.gitignore</code> Chỉ định file/folder không mong muốn khi push lên github<br>
<code>LICENSE</code><br>
<code>MANIFEST.in</code><br>
<code>README.md</code> File này được đồng bộ từ <code>nbs/index.ipynb</code>, nếu muốn edit file ‘README.md’ hãy vô file ‘index.ipynb’ edit<br>
<code>setting.ini</code> Chứa các thông số cấu hình cho project như tên tác giả, tên dự án, version …<br>
<code>setting.py</code><br>
<img src="index_files/figure-html/68c3c987-1-image.png" class="img-fluid"></li>
</ul>
</section>
<section id="push-repository-đã-được-khởi-tạo-nbdev-lên-github" class="level3">
<h3 class="anchored" data-anchor-id="push-repository-đã-được-khởi-tạo-nbdev-lên-github">4. Push repository đã được khởi tạo nbdev lên GitHub</h3>
<ul>
<li>Các command sau để push lên github:<br>
<code>git add .</code><br>
<code>git commit -m 'chore: initial commit'</code><br>
<code>git push</code><br>
</li>
<li>Sau khi push reposirory nbdev của bạn lên GitHub, điều hướng đến <code>Actions</code>, nếu bạn sẽ thấy <code>CI</code> bị Fail. Điều này là do GitHub mặc định giới hạn PAT permission, hãy nhấp vào <strong>settings</strong> trong repository <code>Settings &gt; Actions &gt; General &gt; Workflow permissions &gt; Read and write permission &gt; Save</code>. Bây giờ CI của bạn sẽ chạy lại và hoạt động ngay.</li>
</ul>
</section>
<section id="kích-hoạt-github-pages" class="level3">
<h3 class="anchored" data-anchor-id="kích-hoạt-github-pages">5. Kích hoạt GitHub Pages</h3>
<ul>
<li><p>Bạn cần kích hoạt GitHub Pages cho repository của mình bằng cách nhấp vào <strong>settings</strong> trong repository <code>Setting &gt; Pages &gt; Branch</code> chọn branch bạn muốn và <code>Save</code>. <img src="index_files/figure-html/e5df1c0d-1-3.png" class="img-fluid"></p></li>
<li><p>Việc kích hoạt GitHub Pages này sẽ tạo ra một pages docs trông beautiful như này <a href="https://hoangtrung020541.github.io/nbdev_cards/">nbdev page example</a>. <img src="index_files/figure-html/434ae28e-1-image.png" class="img-fluid"></p></li>
</ul>
</section>
<section id="các-bước-cơ-bản-để-build-một-nbdev-repository" class="level3">
<h3 class="anchored" data-anchor-id="các-bước-cơ-bản-để-build-một-nbdev-repository">6. Các bước cơ bản để build một nbdev repository</h3>
<ul>
<li><p><strong>Install hooks</strong> sử dụng command <code>nbdev_install_hooks</code>.<br>
Hooks đảm bảo rằng các kiểm tra và các processes cần thiết được chạy mỗi khi có thay đổi được thực hiện trên kho repository, như chuyển đổi các file notebooks thành file Python và kiểm tra syntax errors, giúp giữ code và repository được tổ chức và nhất quán.</p></li>
<li><p><strong>Edit .ipynb</strong><br>
Truy cập vào folder <code>/nbs</code> để tạo và edit các file notebook ở đây, chi tiết các viết nbdev notebook sẽ được nêu trong phần <font color="salmon">Directives</font> ở sau.</p></li>
<li><p><strong>Build library</strong> sử dụng command <code>nbdev_export</code>.<br>
Sau khi viết xong file notebook, bạn hãy sử dụng command này giúp convert từ file Jupyter Notebook <code>.ipynb</code> thành file Python <code>.py</code> và sử dụng làm library trong project, giúp code có thể reusable, maintainable và dễ dàng tích hợp vào các project khác. Ngoài ra nbdev còn convert file <code>.ipynb</code> hiển thị trên GitHub Page (khi push).<br>
Note: Bạn cũng có thể sử dụng <code>import nbdev; nbdev.nbdev_export()</code> tại cuối mỗi file notebook để export thay vì sử dụng command.</p></li>
</ul>
<blockquote class="blockquote">
<p>Ví dụ trong hình dưới, đây là file <code>00_card.ipynb</code> trong folder <code>/nbs</code> <img src="index_files/figure-html/a52b6bc3-1-image-2.png" class="img-fluid"></p>
</blockquote>
<blockquote class="blockquote">
<p>Và đây là kết quả khi sử dụng command <code>nbdev_export</code>, nbdev sẽ convert file <code>/nbs/00_card.ipynb</code> thành file <code>/nbdev_cards/card.py</code> (cụ thể tại những cell có <code>#| export</code> trên notebook sẽ được convert qua file <code>.py</code>) <img src="index_files/figure-html/3cd8c654-1-image.png" class="img-fluid"></p>
</blockquote>
<blockquote class="blockquote">
<p>Ngoài ra file <code>00_card.ipynb</code> cũng sẽ được update lên <a href="https://hoangtrung020541.github.io/nbdev_cards/card.html">GitHub Page</a> khi push repository lên github thông qua <code>CI</code> của nbdev. Trong đó các số thứ tự trước tên file <code>ipynb</code> sẽ quyết định thứ tự của chúng trên page, file <code>index.ipynb</code> sẽ nằm đầu tiên. <img src="index_files/figure-html/49059a60-1-6.png" class="img-fluid"></p>
</blockquote>
<ul>
<li><p><strong>Install package</strong> sử dụng command <code>pip install -e '.[dev]'</code>.<br>
Command này được sử dụng trong quá trình develop một Python package để cho phép package được cài đặt và sử dụng trong environment trực tiếp trong khi source code đang được chỉnh sửa, thường được sử dụng sau khi bạn export một file notebook.<br>
<em>Note: Nếu bạn thực hiện các thay đổi đối với code mà không ảnh hưởng đến quá trình install (chẳng hạn như thêm các feature mới hoặc fix bug), bạn có thể không cần phải chạy lệnh này.</em></p></li>
<li><p><strong>Preview docs</strong> sử dụng command <code>nbdev_preview</code>.<br>
Sau khi hoàn chỉnh một file notebook, khi run command này terminal sẽ hiển thị một browser link ở định dạng HTML chạy trên local (ví dụ như <code>http://localhost:3744/</code>). Click vào link để xem trước các bản notebook như thế nào trước khi được đưa lên GitHub Page.</p></li>
<li><p><strong>Prepare change</strong> sử dụng command <code>nbdev_prepare</code>.<br>
Sử dụng trước khi commit hoặc push lên github, để đảm bảo các module của bạn được export đúng cách và các bài test được vượt qua. Trong đó command <code>nbdev_prepare</code>đóng gói các lệnh sau:<br>
<code>nbdev_export</code>: Build file<code>.py</code> module từ Jupyter notebooks<br>
<code>nbdev_test</code>: Tests các file để kiểm tra bug<br>
<code>nbdev_clean</code>: Loại bỏ các output thừa trong notebook để tạo ra một phiên bản notebook “sạch” hơn để đăng trên Github<br>
<code>nbdev_readme</code>: Updates file README.md từ file <code>index.ipynb</code>.</p></li>
<li><p><strong>Push lên Github</strong><br>
Lỗi có thể xảy ra vì bạn quên chạy command <code>nbdev_prepare</code>. Vì vậy, hãy nhớ chạy command này trước khi push lên GitHub, các command để push github:<br>
<code>git add .</code><br>
<code>git commit -m &lt;message&gt;</code><br>
<code>git push</code></p></li>
</ul>
</section>
</section>
<section id="directives" class="level2">
<h2 class="anchored" data-anchor-id="directives">Directives</h2>
<p>Trong nbdev, các directive (hay còn gọi là “magic comments”) là các câu lệnh đặc biệt được sử dụng để thực hiện các chức năng nhất định trong quá trình phát triển và tạo tài liệu cho package. Các directives bắt đầu bằng <code>#|</code> và được đặt ở đầu mỗi cell code trong Jupyter Notebook. Các directive được sử dụng như tín hiệu cho Quarto trong quá trình tạo docs. các tín hiệu này cho biết Quarto nên xử lý các ô như thế nào và định dạng tài liệu như thế nào. &gt; Tìm hiểu thêm về Quarto tại <a href="https://quarto.org/">quarto.org</a></p>
<section id="cell-visibility" class="level3">
<h3 class="anchored" data-anchor-id="cell-visibility">1. Cell Visibility</h3>
<p>Các directive sau đây để thực hiện các chức năng cho page, không áp dụng đối với file <code>.py</code> - <code>#| hide</code> Để ẩn cell code và output trên page. - <code>#| echo: &lt;true|false&gt;</code> Để ẩn cell code trên page và chỉ hiện output (false) , để hiện cả cell code và output trên page (true). - <code>#| output: &lt;true|false|asis&gt;</code> Để set hiển thị output, ẩn (false), hiện (true), hoặc hiển thị kiểu raw markdown (asis) trên page. - <code>#| hide_line</code> Để ẩn 1 dòng code trong cell notebook. - <code>#| filter_stream &lt;keyword&gt;</code> Lọc các dòng chứa từ khóa cụ thể trong kết quả output của cell. - <code>#| code-fold: &lt;show|true&gt;</code> Để thu gọn cell code.</p>
</section>
<section id="generating-source-code" class="level3">
<h3 class="anchored" data-anchor-id="generating-source-code">2. Generating Source Code</h3>
<ul>
<li><code>#| default_exp &lt;name&gt;</code> Để tạo ra một Python package <code>&lt;name&gt;.py</code> từ tệp notebook hiện tại khi export.</li>
<li><code>#| export</code> Chỉ định một cell trong notebook sẽ được export đến file Python <code>.py</code>, ngoài ra directive này cũng tạo documentation chi tiết tại cell đó trên page.</li>
<li><code>#| exports</code> tương tự như <code>#| export</code> nhưng hiển thị thêm docs thông qua <code>showdoc.show_doc</code>.</li>
<li><code>#| exporti</code>Để đánh dấu một hàm hay một đoạn code trong tệp notebook để được xuất ra như một phần của một module con riêng biệt, ví dụ sau: <img src="index_files/figure-html/8dd26e1c-1-image.png" class="img-fluid"></li>
</ul>
</section>
<section id="cell-execution" class="level3">
<h3 class="anchored" data-anchor-id="cell-execution">3. Cell Execution</h3>
<ul>
<li><code>#| exec_doc</code>: Tạo docs trên cell code.</li>
<li><code>#| eval: &lt;true|false&gt;</code> Khi để false, cell code sẽ được ignore trong quá trình test thông qua command <code>nbdev_test</code>.</li>
</ul>
</section>
</section>
<section id="command" class="level2">
<h2 class="anchored" data-anchor-id="command">Command</h2>
<p>Bạn có thể chạy command <code>nbdev_help</code> trên terminal để xem danh sách đầy đủ các command có sẵn:</p>
<p><img src="index_files/figure-html/507a2737-1-image.png" class="img-fluid"></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>